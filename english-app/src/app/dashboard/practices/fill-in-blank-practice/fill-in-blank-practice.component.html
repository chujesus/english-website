<div class="modal-body px-0">
    <div #carousel id="carouselFillIn" class="carousel slide" data-bs-ride="false" data-bs-interval="false">
        <div class="carousel-inner">

            <div *ngFor="let q of questions; let i = index" class="carousel-item" [ngClass]="{ 'active': i === 0 }">
                <div class="container px-4 py-3">
                    <h4 class="mb-3 text-center">Question {{ i + 1 }} of {{ questions.length }}</h4>

                    <div class="d-flex flex-wrap align-items-center justify-content-center gap-2 mb-3">
                        <span class="fw-semibold text-muted">{{ q.prefix.join(' / ') }}</span>
                        <input [(ngModel)]="q.selected" [name]="'q' + i" class="form-control text-center"
                            style="width: 100px;" />
                        <span>{{ q.suffix }}</span>
                    </div>

                    <div *ngIf="q.feedback" class="text-center mt-2">
                        <span
                            [ngClass]="{ 'text-success': q.feedback === 'correct', 'text-danger': q.feedback.startsWith('wrong') }">
                            {{ q.feedback === 'correct' ? 'Correct!' : 'Wrong! The correct answer is: ' +
                            q.feedback.split('|')[1] }}
                        </span>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mt-4">
                        <button class="btn btn-outline-secondary" type="button" data-bs-target="#carouselFillIn"
                            data-bs-slide="prev" [disabled]="i === 0">
                            Previous
                        </button>

                        <button *ngIf="i < questions.length - 1" class="btn btn-outline-secondary" type="button"
                            data-bs-target="#carouselFillIn" data-bs-slide="next">
                            Next
                        </button>

                        <div *ngIf="i === questions.length - 1" class="d-flex gap-2">
                            <button class="btn btn-secondary" (click)="reset()">Reset</button>
                            <button class="btn btn-primary" (click)="checkAnswers()">Check</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <div class="container p-4">
                    <h4 class="text-center mb-3">Summary</h4>
                    <ul class="list-group">
                        <li *ngFor="let q of questions; let i = index"
                            class="list-group-item d-flex justify-content-between align-items-center">
                            <span>{{ q.prefix.join(' / ') }} ___ {{ q.suffix }}</span>
                            <span
                                [ngClass]="{ 'text-success': q.feedback === 'correct', 'text-danger': q.feedback.startsWith('wrong') }">
                                {{ q.feedback === 'correct' ? '✔️' : '✖️ ' + q.feedback.split('|')[1] }}
                            </span>
                        </li>
                    </ul>
                    <div class="text-end mt-4">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                            (click)="clearAll()">Close</button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>